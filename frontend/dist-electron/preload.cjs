"use strict";const n=require("electron");try{let r=function(){return console.log("[preload] Test function called - preload is working!"),"Preload test successful"};console.log("[preload] loaded");const o=Object.freeze({isElectron:!0,testPreload:r,toggleFullscreen:()=>n.ipcRenderer.invoke("window:toggle-fullscreen"),setFullscreen:e=>n.ipcRenderer.invoke("window:set-fullscreen",!!e),isFullscreen:()=>n.ipcRenderer.invoke("window:is-fullscreen"),getAppVersion:()=>n.ipcRenderer.invoke("get-app-version"),getAppPath:()=>n.ipcRenderer.invoke("get-app-path"),getScreenSources:()=>n.ipcRenderer.invoke("get-screen-sources"),writeClipboardText:e=>n.ipcRenderer.invoke("clipboard-write-text",e),getViewerCount:e=>n.ipcRenderer.invoke("get-viewer-count",e),onMenuNewRecording:e=>{n.ipcRenderer.on("menu-new-recording",e)},onMenuOpenRecording:e=>{n.ipcRenderer.on("menu-open-recording",e)},removeAllListeners:e=>{n.ipcRenderer.removeAllListeners(e)},getBackendStatus:()=>n.ipcRenderer.invoke("get-backend-status"),openPreviewWindow:e=>n.ipcRenderer.invoke("open-preview-window",e),openExternal:e=>n.ipcRenderer.invoke("open-external",e)});console.log("[preload] Exposing electronAPI:",o),n.contextBridge.exposeInMainWorld("electronAPI",o),console.log("[preload] electronAPI exposed successfully"),n.contextBridge.exposeInMainWorld("ipc",Object.freeze({on:(...e)=>n.ipcRenderer.on(...e),off:(...e)=>n.ipcRenderer.off(...e),send:(...e)=>n.ipcRenderer.send(...e),invoke:(...e)=>n.ipcRenderer.invoke(...e)})),globalThis.__PRELOAD_OK__=!0,n.contextBridge.exposeInMainWorld("__PRELOAD_OK__",!0),console.log("[preload] APIs exposed: window.electronAPI, window.ipc, window.__PRELOAD_OK__")}catch(r){try{n.ipcRenderer?.send("preload-crashed",String(r))}catch{}console.error("[preload] FAILED:",r)}
